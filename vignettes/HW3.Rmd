---
title: "BIOST 561: Homework 3"
date: "Due date: 7:00pm on <u>**Tuesday**</u>, May 7th, 2024"
output: 
  bookdown::html_document2:
    number_sections: false
    toc: true
    toc_float:
      toc_collapsed: true
    theme: united
vignette: >
  %\VignetteIndexEntry{BIOST 561: Homework 3}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
set.seed(10)
```

# Note about the homework

**Note**: Most of your R code for this homework will **not** be in this homework.
You mainly write `.R` files inside the `R` or `tests` folders.
Therefore, you only need to show a little code inside this R Markdown file.
You only need to write things inside this R Markdown file in the questions that explicitly ask you to do so.

# Q1: Designing a function to generate random graphs with partial cliques
<u>**Question 1D**</u>: In your homework's R Markdown file, show that your `generate_partial_clique()` function works. Specifically, run the following lines. (If you are copy-pasting the following R chunk,
remove the `eval = FALSE` tag.)

```{r}
library(UWBiost561)
set.seed(0)
simulation <- UWBiost561::generate_partial_clique(
  n = 10,
  clique_fraction = 0.5,
  clique_edge_density = 0.9
)

simulation$adj_mat
```
# Q2: Designing a function to find the maximal partial clique



<u>**Question 2C**</u>: Demonstrate (in this R Markdown file)
that your `compute_maximal_partial_clique()` works on the random
adjacency matrix outputted from your function `generate_partial_clique()`.
Specifically, run
the following lines. (If you are copy-pasting the following R chunk,
remove the `eval = FALSE` tag.)

```{r, eval = FALSE}
library(UWBiost561)
set.seed(0)
simulation <- UWBiost561::generate_partial_clique(
  n = 10,
  clique_fraction = 0.5,
  clique_edge_density = 0.9
)

adj_mat <- simulation$adj_mat

res <- UWBiost561::compute_maximal_partial_clique(
  adj_mat = adj_mat,
  alpha = 0.9
)
res
```

This question is purposefully open-ended. Your goal is to simply 
show that the output of your `compute_maximal_partial_clique()` function
based on the adjacency matrix from `generate_partial_clique()` is "reasonable."

# Q3: Developing unit tests for your functions

<mark>**Intent**: The intent of this question is to give you experience
writing unit tests inside your `UWBiost561` package.</mark>

<u>**Question 3A**</u>: Following the overview in
Lecture 5, as well as additional walkthrough in [https://docs.google.com/document/d/103ayPYvyzXHa84YFt-cQm_hMM1Ukqo7hlUygYD6UnC0/edit?usp=sharing](https://docs.google.com/document/d/103ayPYvyzXHa84YFt-cQm_hMM1Ukqo7hlUygYD6UnC0/edit?usp=sharing), create a `tests` folder in your `UWBiost561` package
that contains a `testthat.R` file (shown below) as well as `testthat` folder.
<span style="color: blue;">(There is nothing to report for this question.)</span>

```{r, eval = FALSE}
# This is what your testthat.R file should contain
library(testthat)
library(UWBiost561)

testthat::test_check("UWBiost561")
```

<u>**Question 3B**</u>: Write at least two unit tests for your
`generate_partial_clique()` function inside a file called `test_generate_partial_clique.R`
within the `testthat` folder.
<span style="color: blue;">(There is nothing to report for this question. Your code will be in the `tests/testthat` folder, **not**
in this R Markdown file.)</span>

<u>**Question 3C**</u>: Writing at least five unit tests for your
`compute_maximal_partial_clique()` function inside a file called `test_compute_maximal_partial_clique.R`
within the `testthat` folder. Based on the "List of types of unit-tests" page in Lecture 5,
ensure each of the five unit tests is in a "different category."
<span style="color: blue;">(There is nothing to report for this question. Your code will be in the `tests/testthat` folder, **not**
in this R Markdown file.)</span>

Some pointers:

- You should use `generate_partial_clique()` within some of your tests for `compute_maximal_partial_clique()`.
Since **you** are constructing the random adjacency matrix with a partial clique
with at least edge density of `clique_edge_density` of size `round(n*clique_fraction)`,
then you should expect that for "simple" random adjacency matrices, your `compute_maximal_partial_clique()` can recover the partial clique that **you** constructed.

<u>**Question 3D**</u>: Run `devtools::test()` for your R package `UWBiost561`
when you're in your R project.
<span style="color: blue;">(There is nothing to report for this question. Your code will be in the R console, **not**
in this R Markdown file.)</span>


# Q4: Finalizing your R package

<mark>**Intent**: The intent of this question is to experience the basics 
of making an R package.</mark>

<u>**Question 4A**</u>: Fix the `DESCRIPTION` file as needed. Importantly, this involves adding any R package dependencies your `generate_partial_clique()` and `compute_maximal_partial_clique()` depend on. (If none, you don't need to worry about this.) You should also replace the default author, package title, and description with something more meaningful. <span style="color: blue;">(There is nothing to report for this question.)</span>

<u>**Question 4B**</u>: In your R project for the `UWBiost561` package, run the command `usethis::use_mit_license()` in the R console. <span style="color: blue;">(There is nothing to report for this question.)</span>

At this point, your R package should have the following.

- `R` folder:
  - File specifically called `generate_partial_clique.R`
  - File specifically called `compute_maximal_partial_clique.R`
- `tests` folder:
  - File specifically called `testthat.R`
  - `testthat` folder:
    - File specifically called `test_generate_partial_clique.R`
    - File specifically called `test_compute_maximal_partial_clique.R`
- `vignettes` folder:
  - Multiple files, including files such as `HW1.Rmd`, `HW1.html`, `HW2.Rmd`, `HW2.html`,
  `HW3.Rmd`, `HW3.html` (or analogously named)
- File specifically called `DESCRIPTION`
- File specifically called `LICENSE`
- File specifically called `.Rbuildignore`
- (And other potential files)

<u>**Question 4B**</u>: Run `devtools::check()`. Ensure there are no errors, but it's okay if you don't want to fix the warnings. (`devtools::check()` will also automatically generate a `man` folder with your documentation converted from your ROxygen code and a `NAMESPACE` file.) It might take a while to fix all the errors
that `devtools::check()` complains about -- I would advise using Google to determine what exactly it is unhappy about, or you can ask on the Canvas Discussion board.
<span style="color: blue;">(There is nothing to report for this question. Your code will be in the R console, **not**
in this R Markdown file.)</span>


<u>**Question 4C**</u>: Include a few screenshots of your `devtools::check()` 
result in this R Markdown file. (As a guideline, one screenshot should show the first 20-or-so lines of your 
`devtools::check()` results, and a second screenshot should show the last 
20-or-so lines of your results.) You can use the `knitr::include_graphics()` function to include
figures inside this R Markdown file.

The intent of this question is to provide "evidence" that your `devtools::check()`
went smoothly. You do not need to worry about what your screenshots show specifically.

Figure \@ref(fig:check1) and \@ref(fig:check2) shows the screenshots you are trying to reproduce.

```{r check1, out.width = "400px", fig.align="center", echo = FALSE, fig.cap=c("The first screenshot you are trying to reproduce (without the Sample watermark) in Question 4C.")}
knitr::include_graphics("https://github.com/linnykos/561_s2024_public/blob/main/HW3_files/check1_editted.png?raw=true")
```

```{r check2, out.width = "400px", fig.align="center", echo = FALSE, fig.cap=c("The second screenshot you are trying to reproduce (without the Sample watermark) in Question 4C.")}
knitr::include_graphics("https://github.com/linnykos/561_s2024_public/blob/main/HW3_files/check2_editted.png?raw=true")

```


<u>**Question 4D**</u>: Please include the following code chunk's result in your Markdown file. (If you are copy-pasting the following R chunk,
remove the `eval = FALSE` tag.) This will be useful for me (Kevin) to assess which packages and R version you are using.

```{r, eval = FALSE}
devtools::session_info()
```


# Q5: Storyline for HW4 and final project

<mark>**Intent**: The intent of this question is to prepare you 
for HW4 and the final project.</mark>

<u>**Please read: What to expect for HW4**</u>:
For HW4, I will be curating every student's implementation of `compute_maximal_partial_clique()` and provide one folder that contains every student's
(anonymized) implementation.
Then, you will be: 

1. Doing a code review on two different implementations that I will assign to you specifically (which involves reading the code as well as seeing if these implementations pass your unit tests)
2. Performing a modest simulation study that compares all the implementations in terms
of 1) the size of the maximal partial clique it found, 2) the time it takes 
to complete, and 3) how often it crashes or gives an invalid output. You will be doing this on Bayes (our Biostat servers). 

For this reason, I <u>**strongly**</u> encourage you to take diligence testing your code since every other student will soon be trying out your implementation on their simulated adjacency matrices. 

<u>**Question 5A**</u>: Please make sure you can access this website: [https://opensesame.biostat.washington.edu/](https://opensesame.biostat.washington.edu/). You will need to use this website to access the department servers. (More on this in Lectures 7 and 8.) 

If you can, please write, "I can access OpenSesame." If not, please write, "I cannot access OpenSesame," and please email Kevin immediately (who will help get you access to OpenSesame).

<u>**Question 5B**</u>: In a few sentences, please describe what you think
you'd like to make do for your final project. It is 100% okay for you to "reuse" R code for another course (either past or current, even from your previous institution).
Ideally, it is R code that **you** care about. What you write here is **not** committal -- you can change your idea anytime. The intent of this question is to get you to start thinking about this.

The full project specifications will be released in a few weeks. To give you a sense of what to expect, you'll be making a PkgDown website that looks like [https://linnykos.github.io/561_s2024_example/](https://linnykos.github.io/561_s2024_example/). Briefly, this will involve:

- 1. A R package that includes R code (and possibly code in other languages) to solve a problem. The problem can be as large or as small in scope as you want.
- 2. Unit tests for all your R functions.
- 3. Documentation for all your exported R functions.
- 4. A vignette that explains how to use some of your R functions. The vignette should be "self-contained" (that is, it should include explicit directions on downloading data, or your package has an R function to generate synthetic data).
- 5. A `README` page that explains the purpose of the R package.
- 6. A public PkgDown website for this R package that is hosted via GitHub. (You can take the website down once your grade for this course has been submitted.)

If you do not have any R project in mind, the full project specifications will
give you more specific directions on using your `UWBiost561` package to satisfy
these requirements. However, this experience will feel more meaningful if you
use something you value more as the foundation for the final project.

(This project is <u>*not*</u> intended to take you a long time. Ideally, if you choose
a coding project you care about as the foundation for this final project, 
you already have all the R code, and all that remains is "everything else."
I do not care about how many or complex your functions are.
Realistically, you can use just a meaningful subset of functions in your existing code base
for this project.)

<u>**Question 5B**</u>: Push <u>**all**</u> your code onto GitHub. This includes all the contents inside your `R` and `tests` folder and your `DESCRIPTION`, `NAMESPACE`, and `LICENSE` files. Please double-check that you can see all the necessary files online on the GitHub website (i.e., https://github.com/).
<span style="color: blue;">(There is nothing to report for this question.)</span>

# Q6: Feedback (Optional)

This "question" is an additional way for students to communicate with instructors. 
You could include positive feedback about topics you enjoyed learning in this module, critiques about 
the course difficulty/pacing, 
or some questions/confusions you had about course material.
Your feedback can help shape the course for the rest of this quarter and 
future years. Please be mindful and polite when providing feedback.
You may leave this question blank.


